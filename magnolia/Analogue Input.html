<!DOCTYPE HTML>
<html lang="en-US">
    <head prefix="og: http://ogp.me/ns# book: http://ogp.me/ns/book#">
        
        <meta charset="UTF-8">
        <title>Analogue Input | Learning arduino with the Magnolia</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="robots" content="index, follow">
        <meta name="author" content="raspofabs">
        <meta name="description" content="This gitbook is a guide for beginners who have their hands on a Magnolia board from the L.A. Robotics club, originally developed as a Kickstarter campaign to produce an Arduino inspired robotics starter kit for a very meagre sum of $5 per board.">
        <meta name="keywords" content="gitbook,github" >
        <meta name="generator" content="www.gitbook.io">

        
        <link rel="next" href="./Photoresistors.html" />
        
        
        <link rel="prev" href="./Serial input.html" />
        

        <meta property="og:title" content="Analogue Input | Learning arduino with the Magnolia">
        <meta property="og:site_name" content="Learning arduino with the Magnolia">
        <meta property="og:type" content="book">
        <meta property="og:locale" content="en_US">

        <meta property="book:author" content="https://github.com/raspofabs">
        <meta property="book:tag" content="GitBook">

        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">

        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    </head>
    <body>
        

        <link rel="stylesheet" href="gitbook/style.css">
        


        
    <div class="book" data-github="raspofabs/magnoliabook" data-level="7" data-basepath="." data-revision="1399408660610">
    <div class="book-header">
    <!-- Actions Left -->
    
    <a href="https://github.com/raspofabs/magnoliabook" target="_blank" class="btn pull-left"><i class="fa fa-github-alt"></i></a>
    
    <a href="#" class="btn pull-left toggle-summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search"><i class="fa fa-search"></i></a>
    <span id="font-settings-wrapper">
        <a href="#" class="btn pull-left toggle-font-settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
	<div class="dropdown-caret">
  <span class="caret-outer"></span>
  <span class="caret-inner"></span>
</div>

	<div class="btn-group btn-block">
		<button id="reduce-font-size" class="btn btn-default">A</button>
		<button id="enlarge-font-size" class="btn btn-default">A</button>
	</div>

	<ul class="list-group font-family-list">
		<li class="list-group-item" data-font="0">Serif</li>
		<li class="list-group-item" data-font="1">Sans</li>
	</ul>

	<div class="btn-group btn-group-xs btn-block color-theme-list">
	  <button type="button" class="btn btn-default" id="color-theme-preview-0" data-theme="0">White</button>
	  <button type="button" class="btn btn-default" id="color-theme-preview-1" data-theme="1">Sepia</button>
	  <button type="button" class="btn btn-default" id="color-theme-preview-2" data-theme="2">Night</button>
	</div>
</div>

    </span>

    <!-- Actions Right -->
    <a href="#" target="_blank" class="btn pull-right" data-sharing="google-plus"><i class="fa fa-google-plus"></i></a>
    <a href="#" target="_blank" class="btn pull-right" data-sharing="facebook"><i class="fa fa-facebook"></i></a>
    <a href="#" target="_blank" class="btn pull-right" data-sharing="twitter"><i class="fa fa-twitter"></i></a>

    
    <a href="https://github.com/raspofabs/magnoliabook/stargazers" target="_blank" class="btn pull-right count-star"><i class="fa fa-star-o"></i> Star (<span>-</span>)</a>
    <a href="https://github.com/raspofabs/magnoliabook/watchers" target="_blank" class="btn pull-right count-watch"><i class="fa fa-eye"></i> Watch (<span>-</span>)</a>
    

    <!-- Title -->
    <h1><a href="./" >Learning arduino with the Magnolia</a></h1>
</div>

    <div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Search" class="form-control" />
    </div>
    <ul class="summary">
        
        <li>
            <a href="https://github.com/raspofabs" target="blank">About the author</a>
        </li>
        <li>
            <a href="https://github.com/raspofabs/magnoliabook/issues" target="blank">Questions and Issues</a>
        </li>
        <li>
            <a href="https://github.com/raspofabs/magnoliabook/edit/master/Analogue Input.md" target="blank">Edit and Contribute</a>
        </li>
        <li class="divider"></li>
        
        <li data-level="0" data-path="index.html">
            <a href="./"><i class="fa fa-check"></i> Introduction</a>
        </li>
        
            <li  data-level="1" data-path="Software requirements.html">
                
                <a href="./Software requirements.html">
                    <i class="fa fa-check"></i> <b>1.</b> Basic requirements
                </a>
                
                
            </li>
        
            <li  data-level="2" data-path="First steps.html">
                
                <a href="./First steps.html">
                    <i class="fa fa-check"></i> <b>2.</b> First steps
                </a>
                
                
            </li>
        
            <li  data-level="3" data-path="Multiple lights.html">
                
                <a href="./Multiple lights.html">
                    <i class="fa fa-check"></i> <b>3.</b> Multiple lights
                </a>
                
                
            </li>
        
            <li  data-level="4" data-path="Buttons.html">
                
                <a href="./Buttons.html">
                    <i class="fa fa-check"></i> <b>4.</b> Buttons
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="4.1" data-path="Pulldowns and Pullups.html">
                            
                            <a href="./Pulldowns and Pullups.html">
                                <i class="fa fa-check"></i> <b>4.1.</b> Pulldowns and Pullups
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="5" data-path="Serial output.html">
                
                <a href="./Serial output.html">
                    <i class="fa fa-check"></i> <b>5.</b> Serial output
                </a>
                
                
            </li>
        
            <li  data-level="6" data-path="Serial input.html">
                
                <a href="./Serial input.html">
                    <i class="fa fa-check"></i> <b>6.</b> Serial input
                </a>
                
                
            </li>
        
            <li  data-level="7" data-path="Analogue Input.html">
                
                <a href="./Analogue Input.html">
                    <i class="fa fa-check"></i> <b>7.</b> Analogue Input
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="7.1" data-path="Photoresistors.html">
                            
                            <a href="./Photoresistors.html">
                                <i class="fa fa-check"></i> <b>7.1.</b> Photoresistors
                            </a>
                            
                        </li>
                    
                        <li  data-level="7.2" data-path="Voltage dividers.html">
                            
                            <a href="./Voltage dividers.html">
                                <i class="fa fa-check"></i> <b>7.2.</b> Voltage dividers
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="8" data-path="Filesystem.html">
                
                <a href="./Filesystem.html">
                    <i class="fa fa-check"></i> <b>8.</b> Filesystem
                </a>
                
                
            </li>
        
            <li  data-level="9" data-path="Servos.html">
                
                <a href="./Servos.html">
                    <i class="fa fa-check"></i> <b>9.</b> Servos
                </a>
                
                
            </li>
        
            <li  data-level="10" data-path="Shift Registers.html">
                
                <a href="./Shift Registers.html">
                    <i class="fa fa-check"></i> <b>10.</b> Shift Registers
                </a>
                
                
            </li>
        
            <li  data-level="11" data-path="Multiple Inputs.html">
                
                <a href="./Multiple Inputs.html">
                    <i class="fa fa-check"></i> <b>11.</b> Multiple Inputs
                </a>
                
                
            </li>
        
            <li  data-level="12" >
                
                <span><b>12.</b> Touch sensing</span>
                
                
            </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="page-wrapper" tabindex="-1">
                <div class="book-progress">
    <div class="bar">
        <div class="inner" style="width: 71.42857142857143%;min-width: 64.28571428571429%;"></div>
    </div>
    <div class="chapters">
    
        <a href="./index.html" title="Introduction" class="chapter done new-chapter" data-progress="0" style="left: 0%;"></a>
    
        <a href="./Software requirements.html" title="Basic requirements" class="chapter done new-chapter" data-progress="1" style="left: 7.142857142857143%;"></a>
    
        <a href="./Shift Registers.html" title="Shift Registers" class="chapter done " data-progress="10" style="left: 14.285714285714286%;"></a>
    
        <a href="./Multiple Inputs.html" title="Multiple Inputs" class="chapter done " data-progress="11" style="left: 21.428571428571427%;"></a>
    
        <a href="./First steps.html" title="First steps" class="chapter done new-chapter" data-progress="2" style="left: 28.571428571428573%;"></a>
    
        <a href="./Multiple lights.html" title="Multiple lights" class="chapter done new-chapter" data-progress="3" style="left: 35.714285714285715%;"></a>
    
        <a href="./Buttons.html" title="Buttons" class="chapter done new-chapter" data-progress="4" style="left: 42.857142857142854%;"></a>
    
        <a href="./Pulldowns and Pullups.html" title="Pulldowns and Pullups" class="chapter done " data-progress="4.1" style="left: 50%;"></a>
    
        <a href="./Serial output.html" title="Serial output" class="chapter done new-chapter" data-progress="5" style="left: 57.142857142857146%;"></a>
    
        <a href="./Serial input.html" title="Serial input" class="chapter done new-chapter" data-progress="6" style="left: 64.28571428571429%;"></a>
    
        <a href="./Analogue Input.html" title="Analogue Input" class="chapter done new-chapter" data-progress="7" style="left: 71.42857142857143%;"></a>
    
        <a href="./Photoresistors.html" title="Photoresistors" class="chapter  " data-progress="7.1" style="left: 78.57142857142857%;"></a>
    
        <a href="./Voltage dividers.html" title="Voltage dividers" class="chapter  " data-progress="7.2" style="left: 85.71428571428571%;"></a>
    
        <a href="./Filesystem.html" title="Filesystem" class="chapter  new-chapter" data-progress="8" style="left: 92.85714285714286%;"></a>
    
        <a href="./Servos.html" title="Servos" class="chapter  new-chapter" data-progress="9" style="left: 100%;"></a>
    
    </div>
</div>

                <div class="page-inner">
                
                    <section class="normal" id="section-gitbook_1">
                    
                        <h1 id="analogue-input">Analogue Input</h1>
<p>Often there will be a need for reading a value that isn&#39;t just <code>LOW</code> or <code>HIGH</code>, but something in between. Temperature, light level, humidity, or pressure, all come in a more continuous form than just yes and no. The Magnolia makes a decent enough sensor setup because all its pins are set up for reading analogue values.</p>
<h2 id="analog-reading">Analog reading</h2>
<p>Before we get to the code, an important thing to remember. Unlike digitalRead and digitalWrite, the analogueRead doesn&#39;t use <code>LOW</code> and <code>HIGH</code>, but a range from values from <code>0</code> to <code>1023</code>, so make sure to keep that in mind.</p>
<h2 id="the-code">The code</h2>
<p>We&#39;re going to be doing a nice and reactive example that uses a potentiometer. Set up a pin for the pot middle pin like this.</p>
<pre><code>int led = A0;
int pot = A1;

void setup()
{
    pinMode(led, OUTPUT);
}
</code></pre><p>Notice we don&#39;t set up the input pin. By default, all ATMega328P pins are in input state. You can do it explicitly if you wish (add <code>pinMode(pot, INPUT);</code> to <code>setup()</code>).</p>
<p>Then we need to read the value before we use it in the loop function. Note that value is a <em>local</em> variable, that is, it is created every time the loop function is called. With local variables, we have to explicitely initialise them. In this case, we declare the variable <code>value</code> as an <code>int</code> then give it a value from <code>analogRead</code> straight away.</p>
<pre><code>void loop()
{
    int value = analogRead(pot);

    // turn the light on for a bit
    digitalWrite(led,HIGH);
    delay( 10 );

    // off time depends on value
    digitalWrite(led,LOW);
    delay( value );
}
</code></pre><p>Note, the smaller <code>value</code> is, the shorter the delay, and this the faster the LED will flash.</p>
<h2 id="wiring">Wiring</h2>
<p>We need to wire up the LED for output, and the potentiometer for input. Like with the button, we&#39;re going to ground the input line, but this time in different way.</p>
<p>Put the potentiometer in the board and temporarily give the legs names <strong>PLEFT</strong>, <strong>PMID</strong> and <strong>PRIGHT</strong>.</p>
<ul>
<li><strong>PLEFT</strong> to <strong>VCC</strong></li>
<li><strong>PRIGHT</strong> to <strong>GND</strong></li>
<li><strong>PMID</strong> to <strong>A1</strong></li>
<li><strong>GND</strong> to LED cathode (neg)</li>
<li><strong>A0</strong> to LED anode (pos)</li>
</ul>
<h2 id="running">Running</h2>
<p>Now try the example. The LED light should be flashing. If you turn the knob, the amount of time the LED is on for per cycle will change. Move the knob towards the left pin, and the <code>analogRead</code> will return a smaller value, around 0, so the light will be on most of the time. Turn the knob towards the right pin, and <code>analogRead</code> will return a large value, around the maximum of 1023, and the delay will cause the led to blink about once a second.</p>
<h2 id="why-three-wires-">Why three wires?</h2>
<p>This is how we make inputs work with potentiometers (sliders and knobs, and other variable resistors). We ground one side, power the other, then catch a voltage off the middle pin.</p>
<p>What&#39;s really happening is that the potentiometer is acting as a dynamic pair of resistors, and they are doing a voltage division. This means that they are splitting the voltage between them by how much resistance each side of the middle pin has. The middle pin acts as a pointer to a continuum of different voltages between the left and right legs. When the middle is all the way over one side, that side has very little resistance, so ends up taking up a very small amount of the voltage. Meaning the middle has a value very similar to the side it is nearest to.</p>
<h2 id="take-away">Take away</h2>
<p>Always ground things that are going to be used as inputs.</p>

                    
                    </section>
                
                </div>
            </div>
        </div>

        
        <a href="./Serial input.html" class="navigation navigation-prev"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./Photoresistors.html" class="navigation navigation-next"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        

        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/mode-javascript.js"></script>
        <script src="gitbook/jsrepl/jsrepl.js" id="jsrepl-script"></script>
        <script src="gitbook/app.js"></script>
        

    
    <script src="gitbook/plugins/gitbook-plugin-mixpanel/plugin.js"></script>
    

    
    <script src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {};
    gitbook.start(config);
});
</script>

    </body>
</html>
